schema: '2.0'
stages:
  prepare:
    cmd: python src/stroke_prediction/preprocess.py preprocess-data data/raw/healthcare-dataset-stroke-data.csv
      data/processed/ models/preprocessor.pkl -y --params params.yaml
    deps:
    - path: data/raw/healthcare-dataset-stroke-data.csv
      hash: md5
      md5: 3f25a4c2f2963d969e1a156c08968577
      size: 316971
    - path: src/stroke_prediction/preprocess.py
      hash: md5
      md5: 310d0a35d1edb7d69a1d622ce62c6608
      size: 10431
    params:
      params.yaml:
        preprocess.test_size: 0.15
        preprocess.val_size: 0.15
        random_seed: 42
    outs:
    - path: data/processed/test-stroke-data.parquet
      hash: md5
      md5: 5b14440517b01cf6171d4f4858767313
      size: 18670
    - path: data/processed/train-stroke-data.parquet
      hash: md5
      md5: ba4c5aca2f800c28a031f138374b532e
      size: 44059
    - path: data/processed/val-stroke-data.parquet
      hash: md5
      md5: c1266198a739cede0bfe4ec05fc84acd
      size: 18618
    - path: models/preprocessor.pkl
      hash: md5
      md5: c304b7d99c2cc4c4f9a2580f96432cf2
      size: 1975
  resample:
    cmd: python src/stroke_prediction/preprocess.py resample-data data/processed/train-stroke-data.parquet
      data/processed/train-stroke-data-resampled.parquet -y --params params.yaml
    deps:
    - path: data/processed/train-stroke-data.parquet
      hash: md5
      md5: ba4c5aca2f800c28a031f138374b532e
      size: 44059
    - path: src/stroke_prediction/preprocess.py
      hash: md5
      md5: 310d0a35d1edb7d69a1d622ce62c6608
      size: 10431
    params:
      params.yaml:
        random_seed: 42
    outs:
    - path: data/processed/train-stroke-data-resampled.parquet
      hash: md5
      md5: 5100c5408962f538633adc9d7c2fca09
      size: 209668
  train:
    cmd: python src/stroke_prediction/train.py data/processed/train-stroke-data-resampled.parquet
      data/processed/val-stroke-data.parquet models/model.onnx -y --params params.yaml
    deps:
    - path: data/processed/train-stroke-data-resampled.parquet
      hash: md5
      md5: 5100c5408962f538633adc9d7c2fca09
      size: 209668
    - path: data/processed/val-stroke-data.parquet
      hash: md5
      md5: c1266198a739cede0bfe4ec05fc84acd
      size: 18618
    - path: src/stroke_prediction/train.py
      hash: md5
      md5: 30bc47546227a034d2621bcd0eec8d85
      size: 5988
    params:
      params.yaml:
        catboost.auto_class_weights: Balanced
        catboost.boosting_type: Plain
        catboost.bootstrap_type: MVS
        catboost.colsample_bylevel: 0.09512938089563211
        catboost.depth: 8
        catboost.eval_metric: F1
        catboost.iterations: 1000
        catboost.l2_leaf_reg: 8.115228714496485
        decision_tree.criterion: gini
        decision_tree.max_depth: 8
        decision_tree.min_samples_leaf: 1
        decision_tree.min_samples_split: 2
        decision_tree.splitter: best
        mlp.activation: relu
        mlp.alpha: 0.0015382308040279
        mlp.beta_1: 0.5296178606936361
        mlp.beta_2: 0.935488107125883
        mlp.epsilon: 2.907208890659844e-08
        mlp.hidden_layer_sizes: 166
        mlp.learning_rate: adaptive
        mlp.learning_rate_init: 0.0034877126245459306
        mlp.max_iter: 300
        mlp.solver: adam
        model_type: decision_tree
        random_forest.criterion: gini
        random_forest.max_depth: 4
        random_forest.min_samples_leaf: 1
        random_forest.min_samples_split: 6
        random_forest.n_estimators: 197
    outs:
    - path: models/model.onnx
      hash: md5
      md5: fdb057f984c1ba197d9f10e36f87bbf5
      size: 6964
